<div class="main-content-area">
    <div class="form-container-wrapper large-form-wrapper">
        <h2 class="form-title"><i class="fas fa-handshake form-icon"></i> Available Policies</h2>

        <div class="policy-list-header">
            <input type="text" class="form-control policy-search-input" placeholder="Search policies..."
                [(ngModel)]="searchText" />
        </div>

        <div class="table-responsive policy-table-responsive">
            <table class="policy-table table-hover align-middle">
                <thead>
                    <tr>
                        <th><i class="fas fa-fingerprint"></i> Policy ID</th>
                        <th><i class="fas fa-signature"></i> Policy Name</th>
                        <th><i class="fas fa-shield-alt"></i> Policy Type</th>
                        <th><i class="fas fa-dollar-sign"></i> Premium</th>
                        <th><i class="fas fa-calendar-alt"></i> Term (Months)</th>
                        <th><i class="fas fa-cogs"></i> Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let policy of filteredPolicies()" class="policy-table-row">
                        <td>{{ policy.id }}</td>
                        <td>{{ policy.name }}</td>
                        <td>{{ policy.policyType }}</td>
                        <td>{{ policy.premium | currency }}</td>
                        <td>{{ policy.termMonths }}</td>
                        <td class="policy-actions">
                            <button *ngIf="roleName === 'ADMIN'" class="action-button edit-button" (click)="router.navigate(['/update-policy', policy.id])">
                                <i class="fas fa-edit"></i> Edit
                            </button>
                            <button *ngIf="roleName === 'ADMIN'" class="action-button delete-button" (click)="deletePolicy(policy.id)">
                                <i class="fas fa-trash-alt"></i> Delete
                            </button>
                            <button *ngIf="roleName === 'POLICYHOLDER'" class="action-button buy-button" (click)="buyPolicy(policy)">
                                <i class="fas fa-shopping-cart"></i> Buy
                            </button>
                        </td>
                    </tr>
                    <tr *ngIf="filteredPolicies().length === 0">
                        <td colspan="6" class="text-center no-policies-message">
                            <i class="fas fa-info-circle"></i> No policies found matching your search.
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>
 
<div id="snackbarToast" class="themed-toast align-items-center text-bg-success border-0 position-fixed bottom-0 end-0 m-3"
     role="alert" aria-live="assertive" aria-atomic="true">
  <div class="d-flex">
    <div class="toast-body">
      <!-- Toast message will be set dynamically -->
    </div>
    <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
  </div>
</div>